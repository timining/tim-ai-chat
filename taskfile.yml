version: "3"

vars:
  version:
    sh: node -p "require('./package.json').version.replace('v', '')"

tasks:
  default:
    silent: true
    cmds:
      - task --list --sort none

  version:
    cmds:
      - echo {{.version}}

  build-container:
    silent: true
    desc: Build Docker image.
    cmds:
      - >
        docker build 
        -t tim-ai/chat:{{.version}}
        -f Dockerfile
        --no-cache .
